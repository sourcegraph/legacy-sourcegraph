load("@aspect_rules_ts//ts:defs.bzl", "ts_config")

# load("@npm//:defs.bzl", "npm_link_all_packages")
load("//dev:defs.bzl", "ts_project")

# npm_link_all_packages(name = "node_modules")

# gazelle:js_resolve vscode //:node_modules/@vscode
# gazelle:js_files **/*.{ts,tsx}
# gazelle:js_test_files **/*.{ts,tsx}

ts_config(
    name = "tsconfig",
    src = "../../tsconfig.json",
    deps = [
        "//client/cody:tsconfig",
    ],
)

ts_project(
    name = "e2e_tests",
    testonly = True,
    tsconfig = ":tsconfig",
    srcs = [
        "auth.test.ts",
        "helpers.ts",
    ],
    deps = [
        "//:node_modules/@types/node",
        "//:node_modules/@vscode/test-electron",
        "//client/cody:cody_tests",
        "//client/cody:node_modules/@playwright/test",
        "//client/cody:node_modules/playwright",
    ],
)
