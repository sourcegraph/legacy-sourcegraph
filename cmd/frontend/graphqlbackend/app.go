package graphqlbackend

import (
	"context"

	"github.com/graph-gophers/graphql-go"
)

type LocalDirectoryArgs struct {
	Paths []string
}

type SetupNewAppRepositoriesForEmbeddingArgs struct {
	RepoNames []string
}

type EmbeddingJobStatusArgs struct {
	RepoNames []string
}

type AppResolver interface {
	LocalDirectories(ctx context.Context, args *LocalDirectoryArgs) (LocalDirectoryResolver, error)
	LocalExternalServices(ctx context.Context) ([]LocalExternalServiceResolver, error)

	SetupNewAppRepositoriesForEmbedding(ctx context.Context, args SetupNewAppRepositoriesForEmbeddingArgs) (*EmptyResponse, error)
	EmbeddingJobStatus(ctx context.Context, args EmbeddingJobStatusArgs) (*EmptyResponse, error)
}

type EmbeddingJobStatusResolver interface {
	RepoNames() []string
	Status() string
	PercentComplete() float32
}

type LocalDirectoryResolver interface {
	Paths() []string
	Repositories(ctx context.Context) ([]LocalRepositoryResolver, error)
}

type LocalRepositoryResolver interface {
	Name() string
	Path() string
}

type LocalExternalServiceResolver interface {
	ID() graphql.ID
	Path() string
	Autogenerated() bool
}
